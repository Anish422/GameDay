<!DOCTYPE html>
<html lang="en">
  <head>
    <title>gameday</title>
    <style>
      body {
        font-family: 'Roboto', sans-serif;
        background-color: #f0f4f8;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #333;
      }
      
      h1 {
        font-size: 48px !important; /* Larger size */
        margin-bottom: 20px;
        font-weight: 800;
        color: #000000; /* Bold color */
      }

      h2, h4 {
        font-family: 'Poppins', sans-serif;
      }
    
      h1 {
        font-size: 28px;
        margin-bottom: 15px;
        font-weight: 700;
      }
    
      h2 {
        font-size: 26px;
        font-weight: 600;
        margin-top: 20px;
        margin-bottom: 8px;
      }
    
      h4 {
        font-size: 18px;
        font-weight: 500;
        margin-top: 5px;
        color: #7a7a7a;
      }
    
      p, li, select {
        font-size: 16px;
      }
    
      select {
        font-family: 'Roboto', sans-serif;
        padding: 10px;
        font-size: 16px;
        border-radius: 8px;
        border: 1px solid #1e3a8a;
        background-color: #f9fafb;
        color: #7a7a7a;
        margin-bottom: 20px;
        border: 4px solid #000000;
      }
    
      .container {
        display: flex;
        justify-content: space-between;
        width: 80%;
        height: 30%;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        overflow: hidden;
        background-color: #fff;
        margin-top: 20px;
        margin-bottom: 35px;
        border: 5px solid black;

      }

      .hidden {
      display: none;
      }
    
      .side {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
      }
    
      .side-blue {
        background-color: #1e3a8a;
        color: white;
      }
    
      .side-lightblue {
        background-color: #1e3a8a;
        color: white;
      }
    
      button {
                font-family: 'Roboto', sans-serif;

        padding: 8px 35px;
        font-size: 18px;
        border: none;
        background-color: #1e3a8a;
        color: #f0f4f8;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
      }
    
      button:hover {
        background-color: #97befe;
        transform: scale(1.05);
        color: #1e3a8a;


      }
    
      button:focus {
        outline: none;
      }
    
      .grid-container {
        width: 80%;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
    
      .card {
        background-color: white;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        min-width: 250px;
        position: relative;
        color: white;
        border: 5px solid black;
      }
    
      .card h2 {
        margin: 0;
        font-size: 22px;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
      }
    
      .card p {
        margin: 5px 0;
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
        color: white;
      }
    
      .winner-logo {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 50px;
        height: 50px;
      }
    
      .leader {
        display: flex;
        align-items: center;
        margin-top: 10px;
      }
    
      .leader img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 10px;
      }
    
      .leader-name {
        font-weight: bold;
      }
    
      .leader-stats {
        font-size: 14px;
        color: white;
      }
    
      .key-players {
        text-align: center;
        font-size: 20px;
        font-family: 'Poppins', sans-serif;
        font-weight: bold;
        margin: 10px 0;
        color: white;
        text-shadow: 3px 3px 3px rgb(0, 0, 0);
      }
    
      .loading {
        display: none;
        font-size: 18px;
        color: #1e3a8a;
        font-weight: bold;
        margin-top: 20px;
      }
    
      .loading::after {
        content: "‚è≥";
        display: inline-block;
        animation: pulse 1s infinite ease-in-out;
      }
    
      /* Ensure the container2 element is initially hidden */
      .container2 {
        width: 80%;
        height: 80vh;
        display: flex;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        border-radius: 12px;
        overflow: hidden;
        display: none;
      }

      /* Styles for team blocks within the container */
      .team-block {
        flex: 1;
        padding: 20px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 5px solid black;
      }

      /* Left team block styling */
      .team-block.left {
        background-color: white;
      }

      /* Right team block styling */
      .team-block.right {
        background-color: white;
      }

      /* Team name styling */
      .team-name {
        font-size: 36px; /* Adjusted for better visibility */
        text-align: center;
        margin-bottom: 20px; /* Increased spacing below team name */
        font-weight: bold;
        color: white; /* Changed to dark color for contrast */
        text-shadow: 3px 3px 3px rgb(0, 0, 0);

      }

      /* Stats list styling */
      .stats {
        list-style-type: none;
        line-height: 1.8; /* Improved line spacing for readability */
        color: white; /* Dark color for better contrast */
        padding: 0; /* Remove default padding */
        margin: 0; /* Remove default margin */
      }

      .stats li {
          display: grid;
          grid-template-columns: 1fr auto; /* 1fr for label, auto for value */
          gap: 10px; /* Adjust spacing between label and value */
          margin-bottom: 12px; /* Space between list items */
          font-size: 18px !important; /* Adjust font size as needed */
          align-items: center; /* Vertically align items */
      }

      /* Section title styling within stats */
      .stats .section-title {
        font-weight: bold;
        margin-top: 25px; /* Increased spacing above section titles */
        font-size: 20px; /* Larger font size for section titles */
        color:white; /* Slightly lighter color for section titles */
        font-size: 22px !important;
        text-shadow: 3px 3px 3px rgb(0, 0, 0);

      }
    
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
    </style>
    
  </head>
  <body>
    <h1>gameday.</h1>
    <div class="container">
      <div class="side side-blue">
        <h2>Select Team A</h2>
        <select id="team_a">
          {% for team in nfl_teams %}
          <option value="{{ team }}">{{ team }}</option>
          {% endfor %}
        </select>
      </div>
      <button id="submit">submit</button>
      <div class="side side-lightblue">
        <h2>Select Team B</h2>
        <select id="team_b">
          {% for team in nfl_teams %}
          <option value="{{ team }}">{{ team }}</option>
          {% endfor %}
        </select>
      </div>
    </div>     
    <!-- Loading animation -->
    <div class="loading" id="loading"></div>
    <h2 class="matchup-heading">Current Team Stats</h2>
    <h4 class="matchup-subheading">2024-25 Season</h4>
    <div id="team-stats-container" class="container2">
 
      <div class="team-block left">
        <div>
          <div class="team-name">Team Name Left</div>
          <ul class="stats">
            <li><span class="stat-label">Games Played:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Total Yards:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Quarterback Rating:</span> <span class="stat-value">-</span></li>
            <li class="section-title">Offensive Stats</li>
            <li><span class="stat-label">Passing Yards:</span> <span class="stat-value" >-</span></li>
            <li><span class="stat-label">Passing Touchdowns:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Completion Percentage:</span> <span class="stat-value">-</span></li>
            <li class="section-title">Defensive Stats</li>
            <li><span class="stat-label">Total Sacks:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Forced Fumbles:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Interceptions:</span> <span class="stat-value">-</span></li>
        </ul>
        </div>
      </div>

      <div class="team-block right">
        <div>
          <div class="team-name">Team Name Right</div>
          <ul class="stats">
            <li><span class="stat-label">Games Played:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Total Yards:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Quarterback Rating:</span> <span class="stat-value">-</span></li>
            <li class="section-title">Offensive Stats</li>
            <li><span class="stat-label">Passing Yards:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Passing Touchdowns:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Completion Percentage:</span> <span class="stat-value">-</span></li>
            <li class="section-title">Defensive Stats</li>
            <li><span class="stat-label">Total Sacks:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Forced Fumbles:</span> <span class="stat-value">-</span></li>
            <li><span class="stat-label">Interceptions:</span> <span class="stat-value">-</span></li>
        </ul>
        </div>
      </div>
    </div>
    <!-- Heading for Past Matchups -->
    <h2 class="matchup-heading">Past Matchups</h2>
    <h4 class="matchup-subheading">Last 5 years (2019-2023)</h4>

    

    <!-- Grid container for Matchup Cards -->
    <div class="grid-container" id="grid-container"></div>

    <script>
      const gridContainer = document.getElementById("grid-container");
      const loading = document.getElementById("loading");

      document.getElementById("submit").addEventListener("click", function () {
        const teamA = document.getElementById("team_a").value;
        const teamB = document.getElementById("team_b").value;

        gridContainer.innerHTML = "";
        loading.style.display = "block"; // Show loading

        fetch("/get_matchups", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body: `team_a=${teamA}&team_b=${teamB}`,
        })
          .then((response) => response.json())
          .then((data) => {
            loading.style.display = "none"; // Hide loading
            
            data.forEach((matchup) => {
              const card = `
                <div class="card" style="background-color:${matchup.winner_color};">
                  <h2>${matchup.date}</h2>
                  <img class="winner-logo" src="${matchup.winner_logo}" alt="Winner Logo">
                  <p><strong>Winner:</strong> ${matchup.winner}</p>
                  <p><strong>Score:</strong> ${matchup.score}</p>
                  <div class="key-players">Key Players</div>
                  
                  <!-- Passing Leader -->
                  <div class="leader">
                    <img src="${matchup.passing.image}" alt="${matchup.passing.name}">
                    <div>
                      <p class="leader-name">${matchup.passing.name}</p>
                      <p class="leader-stats">${matchup.passing.stats}</p>
                    </div>
                  </div>

                  <!-- Rushing Leader -->
                  <div class="leader">
                    <img src="${matchup.rushing.image}" alt="${matchup.rushing.name}">
                    <div>
                      <p class="leader-name">${matchup.rushing.name}</p>
                      <p class="leader-stats">${matchup.rushing.stats}</p>
                    </div>
                  </div>

                  <!-- Receiving Leader -->
                  <div class="leader">
                    <img src="${matchup.receiving.image}" alt="${matchup.receiving.name}">
                    <div>
                      <p class="leader-name">${matchup.receiving.name}</p>
                      <p class="leader-stats">${matchup.receiving.stats}</p>
                    </div>
                  </div>
                </div>`;
              gridContainer.innerHTML += card;
            });
          })
          .catch((error) => {
            loading.style.display = "none"; // Hide loading on error
            console.error("Error fetching matchups:", error);
          });
      });

      document.getElementById("submit").addEventListener("click", function () {
    const teamA = document.getElementById("team_a").value;
    const teamB = document.getElementById("team_b").value;

    // Make a POST request to get team stats
    fetch("/get_team_stats", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
        },
        body: `team_a=${teamA}&team_b=${teamB}`,
    })
    .then((response) => response.json())
    .then((data) => {
        if (data.error) {
            console.error("Error fetching team stats:", data.error);
            return;
        }
        
        document.querySelector(".container2").style.display = "flex";

        // Update the stats for Team A (Left)
        document.querySelector(".team-block.left .team-name").textContent = teamA;
        const teamAStats = data.team_a_stats;
        // Fix: Add '#' before the TeamColor
        document.querySelector(".team-block.left").style.backgroundColor = `#${teamAStats.TeamColor || '1e3a8a'}`;
        document.querySelector(".team-block.left .stats").innerHTML = `
            <li>Games Played: ${teamAStats.GamesPlayed || '-'}</li>
            <li>Total Yards: ${teamAStats.TotalYards || '-'}</li>
            <li>Quarterback Rating: ${teamAStats.QBRating || '-'}</li>
            <li class="section-title">Offensive Stats</li>
            <li>Passing Yards: ${teamAStats.PassingYards || '-'}</li>
            <li>Passing Touchdowns: ${teamAStats.PassingTouchdowns || '-'}</li>
            <li>Completion Percentage: ${teamAStats.RdzPct + "%" || '-'}</li>
            <li class="section-title">Defensive Stats</li>
            <li>Total Sacks: ${teamAStats.TotalSacks || '-'}</li>
            <li>Forced Fumbles: ${teamAStats.ForcedFumbles || '-'}</li>
            <li>Interceptions: ${teamAStats.Interceptions || '-'}</li>
        `;

        // Update the stats for Team B (Right)
        document.querySelector(".team-block.right .team-name").textContent = teamB;
        const teamBStats = data.team_b_stats;
        // Fix: Add '#' before the TeamColor
        document.querySelector(".team-block.right").style.backgroundColor = `#${teamBStats.TeamColor || 'b3cde0'}`;
        document.querySelector(".team-block.right .stats").innerHTML = `
            <li>Games Played: ${teamBStats.GamesPlayed || '-'}</li>
            <li>Total Yards: ${teamBStats.TotalYards || '-'}</li>
            <li>Quarterback Rating: ${teamBStats.QBRating || '-'}</li>
            <li class="section-title">Offensive Stats</li>
            <li>Passing Yards: ${teamBStats.PassingYards || '-'}</li>
            <li>Passing Touchdowns: ${teamBStats.PassingTouchdowns || '-'}</li>
            <li>Completion Percentage: ${teamBStats.RdzPct + "%" || '-'}</li>
            <li class="section-title">Defensive Stats</li>
            <li>Total Sacks: ${teamBStats.TotalSacks || '-'}</li>
            <li>Forced Fumbles: ${teamBStats.ForcedFumbles || '-'}</li>
            <li>Interceptions: ${teamBStats.Interceptions || '-'}</li>
        `;

        
    })
    .catch((error) => {
        console.error("Error fetching team stats:", error);
    });
});


</script>
    </script>
  </body>
</html>
